const e=document.querySelector(".pagination__list"),t=document.querySelector("#search-form"),a=document.querySelector("input"),n=document.querySelector(".film-list");let s=1;const l=async e=>{const t=await fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=18cc3ec683925dedb66d3e6092890eaa&page=${e}`);return await t.json()},i=async(e,t)=>{const a=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=18cc3ec683925dedb66d3e6092890eaa&language=pl-PL&query=${e}&page=${t}&include_adult=false`);return await a.json()};function r(t,a){let n,s="",l=a-1,i=a+1;a>1&&(s+=`<li class="btn prev" data-number=${a-1} onclick="element(totalPages, ${a-1})"><span>&#8592</span></li>`),a>2&&(s+='<li class="num" data-number=1 onclick="element(totalPages, 1)"><span>1</span></li>',a>3&&(s+='<li class="dots"><span>...</span></li>')),a===t?l-=2:a===t-1&&(l-=1),1===a?i+=2:2===a&&(i+=1);for(let e=l;e<=i;e++)e>t||(0===e&&e++,n=a===e?"active":"",s+=`<li class="num ${n}" data-number=${e} onclick="element(totalPages, ${e})"><span>${e}</span></li>`);a<t-1&&(a<t-3&&(s+='<li class="dots"><span>...</span></li>'),s+=`<li class="num" data-number=${t} onclick="element(totalPages, ${t})"><span>${t}</span></li>`),a<t&&(s+=`<li class="btn next" data-number=${a+1} onclick="element(totalPages, ${a+1})"><span>&#8594</span></li>`),1===t&&(s='<li class="btn prev"><span>&#8592</span></li>\n          <li class="num active"><span>1</span></li>\n          <li class="btn next"><span>&#8594</span></li>'),e.innerHTML=s}const c=e=>{const t=e.results.map((e=>`<div class="single-film">\n            <img class="film-image" src="https://image.tmdb.org/t/p/w400/${e.poster_path}"\n                alt="${e.title}">\n            <div class="film-info">\n                <p class="film-title">${e.title}</p>\n                <div class="film-subinfo">\n                    <p>Gatunek z API</p>\n                    <p>${e.release_date}</p>\n                </div>\n            </div>\n        </div>`)).join("");n.innerHTML=t};l(s).then((t=>{c(t),r(t.total_pages,s),e.addEventListener("click",(e=>{s=Number(e.target.dataset.number),l(s).then((e=>{c(e),r(e.total_pages,s)}))}))})),e.removeEventListener("submit",{}),t.addEventListener("submit",(t=>{let o=a.value.trim();t.preventDefault(),n.innerHTML="",e.innerHTML="",s=1;try{return""===o&&(n.innerHTML="",e.innerHTML=""),i(o,s).then((t=>{if(0===t.total_results)return alert("there are no movies with this title, here are the popular movies of the moment"),l(s).then((t=>{c(t),r(t.total_pages,s),e.addEventListener("click",(e=>{s=Number(e.target.dataset.number),l(s).then((e=>{c(e),r(e.total_pages,s)}))})),e.removeEventListener("submit",{})}));t.total_results>0&&(c(t),r(t.total_pages,s),e.addEventListener("click",(e=>{s=Number(e.target.dataset.number),i(o,s).then((e=>{c(e),r(e.total_pages,s)}))})),e.removeEventListener("submit",{}))}))}catch(e){console.log(e.message)}}));
//# sourceMappingURL=index.c8e93214.js.map

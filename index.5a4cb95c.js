const e=document.querySelector(".pagination__list"),a=document.querySelector("#search-form"),t=document.querySelector("input"),n=document.querySelector(".film-list");let s=1;const i=async e=>{const a=await fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=18cc3ec683925dedb66d3e6092890eaa&page=${e}`);return await a.json()},l=async(e,a)=>{const t=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=18cc3ec683925dedb66d3e6092890eaa&language=pl-PL&query=${e}&page=${a}&include_adult=false`);return await t.json()};function c(a,t){let n,s="",i=t-1,l=t+1;e.innerHTML="",t>1&&(s+=`<li class="btn prev" data-page="${t-1}" onclick="changePage(totalPages, ${t-1})"><span>&#8592</span></li>`),t>2&&(s+='<li class="num" data-page="1" onclick="changePage(totalPages, 1)"><span>1</span></li>',t>3&&(s+='<li class="dots"><span>...</span></li>')),t===a?i-=2:t===a-1&&(i-=1),1===t?l+=2:2===t&&(l+=1);for(let e=i;e<=l;e++)e>a||(0===e&&e++,n=t===e?"active":"",s+=`<li class="num ${n}" data-page="${e}" onclick="changePage(totalPages, ${e})"><span>${e}</span></li>`);t<a-1&&(t<a-3&&(s+='<li class="dots"><span>...</span></li>'),s+=`<li class="num" data-page="${a}" onclick="changePage(totalPages, ${a})"><span>${a}</span></li>`),t<a&&(s+=`<li class="btn next" data-page="${t+1}" onclick="changePage(totalPages, ${t+1})"><span>&#8594</span></li>`),1===a&&(s='<li class="btn prev"><span>&#8592</span></li>\n          <li class="num active"><span>1</span></li>\n          <li class="btn next"><span>&#8594</span></li>'),e.innerHTML=s}const o=e=>{const a=e.results.map((e=>`<div class="single-film">\n            <img class="film-image" src="https://image.tmdb.org/t/p/w400/${e.poster_path}"\n                alt="${e.title}">\n            <div class="film-info">\n                <p class="film-title">${e.title}</p>\n                <div class="film-subinfo">\n                    <p>Gatunek z API</p>\n                    <p>${e.release_date}</p>\n                </div>\n            </div>\n        </div>`)).join("");n.innerHTML=a};i(s).then((async a=>{o(a),c(a.total_pages,s),e.addEventListener("click",(async e=>{s=Number(e.target.dataset.page),console.log(e.target.dataset.page);const a=await i(s);o(a),c(a.total_pages,s)}))})),e.removeEventListener("submit",{}),a.addEventListener("submit",(async a=>{let i=t.value.trim();a.preventDefault(),n.innerHTML="",e.innerHTML="",s=1;try{return""===i&&(n.innerHTML="",e.innerHTML=""),l(i,s).then((a=>{0===a.total_results&&alert("there are no movies with this title, here are the popular movies of the moment"),a.total_results>0&&(o(a),c(a.total_pages,s),e.addEventListener("click",(e=>{s=Number(e.target.textContent),l(i,s).then((e=>{o(e),c(e.total_pages,s)}))})),e.removeEventListener("submit",{}))}))}catch(e){console.log(e.message)}}));
//# sourceMappingURL=index.5a4cb95c.js.map

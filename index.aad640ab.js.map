{"mappings":"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","sources":["src/pagination.js"],"sourcesContent":["const ulTag = document.querySelector('.pagination__list');\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('input');\nconst filmList = document.querySelector('.film-list');\n\nlet totalPages = 20;\nlet page = 1;\nconst API_KEY = '18cc3ec683925dedb66d3e6092890eaa';\n\nconst fetchResponseTrend = async pagenr => {\n  const responseTrend = await fetch(\n    `https://api.themoviedb.org/3/trending/movie/week?api_key=${API_KEY}&page=${pagenr}`\n  );\n  //   if (!responseTrend.ok) throw new Error();\n  const moviesTrend = await responseTrend.json();\n  return moviesTrend;\n};\n\nconst fetchResponseSearch = async (search, pagenr) => {\n  const responseSearch = await fetch(\n    `https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&language=pl-PL&query=${search}&page=${pagenr}&include_adult=false`\n  );\n  //   if (!responseSearch.ok) throw new Error();\n  const moviesSearch = await responseSearch.json();\n  return moviesSearch;\n};\n\n// console.log(fetchResponseTrend(1));\n\nfunction changePage(totalPages, page) {\n  let liTag = '';\n  let activeLi;\n  let beforePages = page - 1;\n  let afterPages = page + 1;\n\n  if (page > 1) {\n    liTag += `<li class=\"btn prev\" data-page=\"${\n      page - 1\n    }\" onclick=\"changePage(totalPages, ${page - 1})\"><span>&#8592</span></li>`;\n  }\n\n  if (page > 2) {\n    liTag += `<li class=\"num\" data-page=\"1\" onclick=\"changePage(totalPages, 1)\"><span>1</span></li>`;\n    if (page > 3) {\n      liTag += `<li class=\"dots\"><span>...</span></li>`;\n    }\n  }\n\n  if (page === totalPages) {\n    beforePages = beforePages - 2;\n  } else if (page === totalPages - 1) {\n    beforePages = beforePages - 1;\n  }\n\n  if (page === 1) {\n    afterPages = afterPages + 2;\n  } else if (page === 2) {\n    afterPages = afterPages + 1;\n  }\n\n  for (let pageLength = beforePages; pageLength <= afterPages; pageLength++) {\n    if (pageLength > totalPages) {\n      continue;\n    }\n    if (pageLength === 0) {\n      pageLength++;\n    }\n    if (page === pageLength) {\n      activeLi = 'active';\n    } else {\n      activeLi = '';\n    }\n    liTag += `<li class=\"num ${activeLi}\" data-page=\"${pageLength}\" onclick=\"changePage(totalPages, ${pageLength})\"><span>${pageLength}</span></li>`;\n  }\n\n  if (page < totalPages - 1) {\n    if (page < totalPages - 3) {\n      liTag += `<li class=\"dots\"><span>...</span></li>`;\n    }\n    liTag += `<li class=\"num\" data-page=\"${totalPages}\" onclick=\"changePage(totalPages, ${totalPages})\"><span>${totalPages}</span></li>`;\n  }\n\n  if (page < totalPages) {\n    liTag += `<li class=\"btn next\" data-page=\"${\n      page + 1\n    }\" onclick=\"changePage(totalPages, ${page + 1})\"><span>&#8594</span></li>`;\n  }\n\n  if (totalPages === 1) {\n    liTag = `<li class=\"btn prev\"><span>&#8592</span></li>\n          <li class=\"num active\"><span>1</span></li>\n          <li class=\"btn next\"><span>&#8594</span></li>`;\n  }\n\n  ulTag.innerHTML = liTag;\n}\n\n// changePage(totalPages, page);\n\nconst addFilms = films => {\n  const movies = films.results;\n  const markup = movies\n    .map(\n      film =>\n        `<div class=\"single-film\">\n            <img class=\"film-image\" src=\"https://image.tmdb.org/t/p/w400/${film.poster_path}\"\n                alt=\"${film.title}\">\n            <div class=\"film-info\">\n                <p class=\"film-title\">${film.title}</p>\n                <div class=\"film-subinfo\">\n                    <p>Gatunek z API</p>\n                    <p>${film.release_date}</p>\n                </div>\n            </div>\n        </div>`\n    )\n    .join('');\n  filmList.innerHTML = markup;\n};\n\nfetchResponseTrend(page).then(popularMovies => {\n  addFilms(popularMovies);\n  changePage(popularMovies.total_pages, page);\n\n    ulTag.addEventListener('click', event => {\n      \n    page = Number(event.target.textContent);\n      console.log(event.target.dataset.page);\n      \n    fetchResponseTrend(page).then(popularMovies => {\n      addFilms(popularMovies);\n      changePage(popularMovies.total_pages, page);\n    });\n  });\n});\n\nulTag.removeEventListener('submit', {});\n\nform.addEventListener('submit', e => {\n  let tipedInput = input.value.trim();\n  e.preventDefault();\n  filmList.innerHTML = '';\n  ulTag.innerHTML = '';\n\n  page = 1;\n  try {\n    // console.log(fetchResponseSearch(tipedInput, page));\n    if (tipedInput === '') {\n      filmList.innerHTML = '';\n      ulTag.innerHTML = '';\n    }\n    return fetchResponseSearch(tipedInput, page).then(movies => {\n      if (movies.total_results === 0) {\n        alert(\n          `there are no movies with this title, here are the popular movies of the moment`\n        );\n        return fetchResponseTrend(page).then(films => {\n          addFilms(films);\n          changePage(films.total_pages, page);\n\n          ulTag.addEventListener('click', event => {\n            page = Number(event.target.textContent);\n\n            fetchResponseTrend(page).then(films => {\n              addFilms(films);\n              changePage(films.total_pages, page);\n            });\n          });\n          ulTag.removeEventListener('submit', {});\n        });\n      }\n\n      if (movies.total_results > 0) {\n        addFilms(movies);\n        changePage(movies.total_pages, page);\n\n        ulTag.addEventListener('click', event => {\n          page = Number(event.target.textContent);\n\n          fetchResponseSearch(tipedInput, page).then(movies => {\n            addFilms(movies);\n            changePage(movies.total_pages, page);\n          });\n        });\n        ulTag.removeEventListener('submit', {});\n      }\n    });\n  } catch (error) {\n    console.log(error.message);\n  }\n});\n\n// ulTag.addEventListener(\"click\", (event) => {\n//     page = event.target.dataset.number\n//     changePage(films.total_pages, page)\n// })\n"],"names":["$a593388852b485da$var$ulTag","document","querySelector","$a593388852b485da$var$form","$a593388852b485da$var$input","$a593388852b485da$var$filmList","$a593388852b485da$var$page","$a593388852b485da$var$fetchResponseTrend","async","pagenr","responseTrend","fetch","json","$a593388852b485da$var$fetchResponseSearch","search","responseSearch","$a593388852b485da$var$changePage","totalPages1","page1","activeLi","liTag","beforePages","afterPages","pageLength","innerHTML","$a593388852b485da$var$addFilms","films","markup","results","map","film","poster_path","title","release_date","join","then","popularMovies1","total_pages","addEventListener","event","Number","target","textContent","console","log","dataset","page","popularMovies","removeEventListener","e","tipedInput","value","trim","preventDefault","movies1","total_results","alert","films1","movies","error","message"],"version":3,"file":"index.aad640ab.js.map"}
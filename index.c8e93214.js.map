{"mappings":"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","sources":["src/pagination.js"],"sourcesContent":["const ulTag = document.querySelector('.pagination__list');\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('input');\nconst filmList = document.querySelector('.film-list');\n\nlet totalPages = 20;\nlet page = 1;\nconst API_KEY = '18cc3ec683925dedb66d3e6092890eaa';\n\nconst fetchResponseTrend = async pagenr => {\n  const responseTrend = await fetch(\n    `https://api.themoviedb.org/3/trending/movie/week?api_key=${API_KEY}&page=${pagenr}`\n  );\n  //   if (!responseTrend.ok) throw new Error();\n  const moviesTrend = await responseTrend.json();\n  return moviesTrend;\n};\n\nconst fetchResponseSearch = async (search, pagenr) => {\n  const responseSearch = await fetch(\n    `https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&language=pl-PL&query=${search}&page=${pagenr}&include_adult=false`\n  );\n  //   if (!responseSearch.ok) throw new Error();\n  const moviesSearch = await responseSearch.json();\n  return moviesSearch;\n};\n\n// console.log(fetchResponseTrend(1));\n\nfunction element(totalPages, page) {\n  let liTag = '';\n  let activeLi;\n  let beforePages = page - 1;\n  let afterPages = page + 1;\n\n  if (page > 1) {\n    liTag += `<li class=\"btn prev\" data-number=${\n      page - 1\n    } onclick=\"element(totalPages, ${page - 1})\"><span>&#8592</span></li>`;\n  }\n\n  if (page > 2) {\n    liTag += `<li class=\"num\" data-number=1 onclick=\"element(totalPages, 1)\"><span>1</span></li>`;\n    if (page > 3) {\n      liTag += `<li class=\"dots\"><span>...</span></li>`;\n    }\n  }\n\n  if (page === totalPages) {\n    beforePages = beforePages - 2;\n  } else if (page === totalPages - 1) {\n    beforePages = beforePages - 1;\n  }\n\n  if (page === 1) {\n    afterPages = afterPages + 2;\n  } else if (page === 2) {\n    afterPages = afterPages + 1;\n  }\n\n  for (let pageLength = beforePages; pageLength <= afterPages; pageLength++) {\n    if (pageLength > totalPages) {\n      continue;\n    }\n    if (pageLength === 0) {\n      pageLength++;\n    }\n    if (page === pageLength) {\n      activeLi = 'active';\n    } else {\n      activeLi = '';\n    }\n    liTag += `<li class=\"num ${activeLi}\" data-number=${pageLength} onclick=\"element(totalPages, ${pageLength})\"><span>${pageLength}</span></li>`;\n  }\n\n  if (page < totalPages - 1) {\n    if (page < totalPages - 3) {\n      liTag += `<li class=\"dots\"><span>...</span></li>`;\n    }\n    liTag += `<li class=\"num\" data-number=${totalPages} onclick=\"element(totalPages, ${totalPages})\"><span>${totalPages}</span></li>`;\n  }\n\n  if (page < totalPages) {\n    liTag += `<li class=\"btn next\" data-number=${\n      page + 1\n    } onclick=\"element(totalPages, ${page + 1})\"><span>&#8594</span></li>`;\n  }\n\n  if (totalPages === 1) {\n    liTag = `<li class=\"btn prev\"><span>&#8592</span></li>\n          <li class=\"num active\"><span>1</span></li>\n          <li class=\"btn next\"><span>&#8594</span></li>`;\n  }\n\n  ulTag.innerHTML = liTag;\n}\n\n// element(totalPages, page);\n\nconst addFilms = films => {\n  const movies = films.results;\n  const markup = movies\n    .map(\n      film =>\n        `<div class=\"single-film\">\n            <img class=\"film-image\" src=\"https://image.tmdb.org/t/p/w400/${film.poster_path}\"\n                alt=\"${film.title}\">\n            <div class=\"film-info\">\n                <p class=\"film-title\">${film.title}</p>\n                <div class=\"film-subinfo\">\n                    <p>Gatunek z API</p>\n                    <p>${film.release_date}</p>\n                </div>\n            </div>\n        </div>`\n    )\n    .join('');\n  filmList.innerHTML = markup;\n};\n\nfetchResponseTrend(page).then(popularMovies => {\n  addFilms(popularMovies);\n  element(popularMovies.total_pages, page);\n\n  ulTag.addEventListener('click', event => {\n    page = Number(event.target.dataset.number);\n\n    fetchResponseTrend(page).then(popularMovies => {\n      addFilms(popularMovies);\n      element(popularMovies.total_pages, page);\n    });\n  });\n});\n\nulTag.removeEventListener('submit', {})\n\nform.addEventListener('submit', e => {\n  let tipedInput = input.value.trim();\n  e.preventDefault();\n  filmList.innerHTML = '';\n  ulTag.innerHTML = '';\n\n  page = 1;\n  try {\n    // console.log(fetchResponseSearch(tipedInput, page));\n    if (tipedInput === '') {\n      filmList.innerHTML = '';\n      ulTag.innerHTML = '';\n    }\n    return fetchResponseSearch(tipedInput, page).then(movies => {\n      if (movies.total_results === 0) {\n        alert(\n          `there are no movies with this title, here are the popular movies of the moment`\n        );\n        return fetchResponseTrend(page).then(films => {\n          addFilms(films);\n          element(films.total_pages, page);\n\n          ulTag.addEventListener('click', event => {\n            page = Number(event.target.dataset.number);\n\n            fetchResponseTrend(page).then(films => {\n              addFilms(films);\n              element(films.total_pages, page);\n            });\n          });\n            ulTag.removeEventListener('submit', {})\n        });\n      }\n\n      if (movies.total_results > 0) {\n        addFilms(movies);\n        element(movies.total_pages, page);\n\n        ulTag.addEventListener('click', event => {\n          page = Number(event.target.dataset.number);\n\n          fetchResponseSearch(tipedInput, page).then(movies => {\n            addFilms(movies);\n            element(movies.total_pages, page);\n          });\n        });ulTag.removeEventListener('submit', {})\n      }\n    });\n  } catch (error) {\n    console.log(error.message);\n  }\n});\n\n// ulTag.addEventListener(\"click\", (event) => {\n//     page = event.target.dataset.number\n//     element(films.total_pages, page)\n// })\n"],"names":["$a593388852b485da$var$ulTag","document","querySelector","$a593388852b485da$var$form","$a593388852b485da$var$input","$a593388852b485da$var$filmList","$a593388852b485da$var$page","$a593388852b485da$var$fetchResponseTrend","async","pagenr","responseTrend","fetch","json","$a593388852b485da$var$fetchResponseSearch","search","responseSearch","$a593388852b485da$var$element","totalPages1","page1","activeLi","liTag","beforePages","afterPages","pageLength","innerHTML","$a593388852b485da$var$addFilms","films","markup","results","map","film","poster_path","title","release_date","join","then","popularMovies1","total_pages","addEventListener","event","Number","target","dataset","number","popularMovies","removeEventListener","e","tipedInput","value","trim","preventDefault","movies1","total_results","alert","films1","movies","error","console","log","message"],"version":3,"file":"index.c8e93214.js.map"}